const form=document.querySelector("#itemForm"),itemInput=document.querySelector("#itemInput"),itemList=document.querySelector("#itemList"),messageDiv=document.querySelector("#message"),clearButton=document.querySelector("#clearBtn"),filters=document.querySelectorAll(".nav-item");let todoItems=[];const showAlert=function(e,t){console.log("msg"),messageDiv.innerHTML=e,messageDiv.classList.add(t,"show"),messageDiv.classList.remove("hide"),setTimeout((()=>{messageDiv.classList.remove("show",t),messageDiv.classList.add("hide")}),3e3)},getItemsFilter=function(e){let t=[];switch(console.log(e),e){case"todo":t=todoItems.filter((e=>!e.isDone));break;case"done":t=todoItems.filter((e=>e.isDone));break;default:t=todoItems}getList(t)},updateItem=function(e,t){console.log(e);const o=todoItems[e];o.name=t,todoItems.splice(e,1,o),setLocalStorage(todoItems)},removeItem=function(e){const t=todoItems.indexOf(e);todoItems.splice(t,1)},handleItem=function(e){document.querySelectorAll(".list-group-item").forEach((t=>{t.querySelector(".title").getAttribute("data-time")==e.addedAt&&(t.querySelector("[data-done]").addEventListener("click",(function(t){t.preventDefault();const o=todoItems.indexOf(e),s=todoItems[o],i=s.isDone?"bi-check-circle-fill":"bi-check-circle";s.isDone=!s.isDone,todoItems.splice(o,1,s),setLocalStorage(todoItems);const n=s.isDone?"bi-check-circle-fill":"bi-check-circle";this.firstElementChild.classList.replace(i,n);const c=document.querySelector("#filterType").value;getItemsFilter(c)})),t.querySelector("[data-edit]").addEventListener("click",(function(t){return t.preventDefault(),itemInput.value=e.name,document.querySelector("#citem").value=todoItems.indexOf(e),todoItems})),t.querySelector("[data-delete]").addEventListener("click",(function(o){if(o.preventDefault(),confirm("Are you sure want to delete?"))return itemList.removeChild(t),removeItem(t),setLocalStorage(todoItems),showAlert("Item has been deleted.","alert-success"),todoItems.filter((t=>t!=e))})))}))},getList=function(e){itemList.innerHTML="",e.length>0?e.forEach((e=>{const t=e.isDone?"bi-check-circle-fill":"bi-check-circle";itemList.insertAdjacentHTML("beforeend",`<li class="list-group-item d-flex justify-content-between align-items-center">\n          <span class="title" data-time="${e.addedAt}">${e.name}</span> \n          <span>\n              <a href="#" data-done><i class="bi ${t} green"></i></a>\n              <a href="#" data-edit><i class="bi bi-pencil-square blue"></i></a>\n              <a href="#" data-delete><i class="bi bi-x-circle red"></i></a>\n          </span>\n        </li>`),handleItem(e)})):itemList.insertAdjacentHTML("beforeend",'<li class="list-group-item d-flex justify-content-between align-items-center">\n        No record found.\n      </li>')},getLocalStorage=function(){const e=localStorage.getItem("todoItems");todoItems="undefined"===e||null===e?[]:JSON.parse(e),getList(todoItems)},setLocalStorage=function(e){localStorage.setItem("todoItems",JSON.stringify(e))};document.addEventListener("DOMContentLoaded",(()=>{form.addEventListener("submit",(e=>{e.preventDefault();const t=itemInput.value.trim();if(0!==t.length){{const e=document.querySelector("#citem").value;if(e)updateItem(e,t),document.querySelector("#citem").value="",showAlert("Item has been updated.","alert-success");else{const e={name:t,isDone:!1,addedAt:(new Date).getTime()};todoItems.push(e),setLocalStorage(todoItems),showAlert("New item has been added.","alert-success")}getList(todoItems)}console.log(todoItems),itemInput.value=""}else showAlert("Please enter name.","alert-danger")})),filters.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("data-type");document.querySelectorAll(".nav-link").forEach((e=>{e.classList.remove("active")})),this.firstElementChild.classList.add("active"),document.querySelector("#filterType").value=t,getItemsFilter(t)}))})),getLocalStorage()}));